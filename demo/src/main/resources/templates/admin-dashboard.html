<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Admin Dashboard</title>
  <style>
    body { font-family: Arial; padding: 30px; background: #f4f6f9; }
    table { width: 100%; background: white; border-collapse: collapse; }
    th, td { padding: 12px; border-bottom: 1px solid #ddd; text-align: center; }
    th { background: #667eea; color: white; }

    .card { padding: 20px; background: white; border-radius: 10px; }
    .stats { display: flex; gap: 20px; margin-bottom: 20px; }

    button { padding: 6px 12px; border: none; cursor: pointer; }
    .view { background: #3498db; color: white; }
    .enable { background: #2ecc71; color: white; }
    .disable { background: #e67e22; color: white; }
    .delete { background: #e74c3c; color: white; }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logout {
      background: #34495e;
      color: white;
      padding: 8px 15px;
      border-radius: 5px;
    }

    form { display: inline; }
  </style>
</head>

<body>

<div class="top-bar">
  <h2>ğŸ§‘â€ğŸ’¼ Admin Dashboard</h2>

  <!-- LOGOUT -->
  <form th:action="@{/logout}" method="post">
    <button class="logout">Logout</button>
  </form>
</div>

<div class="stats">
  <div class="card">ğŸ‘¥ Total Users: <b th:text="${totalUsers}"></b></div>
  <div class="card">âœ… Active: <b th:text="${activeUsers}"></b></div>
  <div class="card">ğŸš« Blocked: <b th:text="${blockedUsers}"></b></div>
</div>

<table>
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th>Status</th>
    <th>Actions</th>
  </tr>

  <tr th:each="user : ${users}">
    <td th:text="${user.name}"></td>
    <td th:text="${user.email}"></td>
    <td th:text="${user.enabled ? 'Active' : 'Blocked'}"></td>

    <td>
      <!-- VIEW -->
      <a th:href="@{/admin/user/{id}(id=${user.id})}">
        <button class="view">View</button>
      </a>

      <!-- DISABLE -->
      <form th:if="${user.enabled}"
            th:action="@{/admin/disable/{id}(id=${user.id})}"
            method="post">
        <button class="disable">Disable</button>
      </form>

      <!-- ENABLE -->
      <form th:if="${!user.enabled}"
            th:action="@{/admin/enable/{id}(id=${user.id})}"
            method="post">
        <button class="enable">Enable</button>
      </form>

      <!-- DELETE -->
      <form th:action="@{/admin/delete/{id}(id=${user.id})}"
            method="post"
            onsubmit="return confirm('Delete this user permanently?');">
        <button class="delete">Delete</button>
      </form>
    </td>
  </tr>
</table>

</body>
</html>
